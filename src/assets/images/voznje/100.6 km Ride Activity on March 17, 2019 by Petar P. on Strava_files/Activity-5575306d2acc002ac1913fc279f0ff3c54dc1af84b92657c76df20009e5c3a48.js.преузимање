(function(){null==window.JST&&(window.JST={}),window.JST["activities/splits_table"]=function(t){return function(){var t,e,a;return e=window.HAML.escape,t=window.HAML.cleanValue,a=[],a.push("<tr id='"+e(t(this.id))+"'>\n  <td style='width:60px;'>"+e(t((new TwitterCldr.DecimalFormatter).format(this.mile)))+"</td>\n  <td class='pace' data-pace='"+e(t(this.pace))+"' data-pace-width='"+e(t(this.widthPercent))+"'>\n    <div class='bar'>\n      <div class='fill' style='width: "+e(t(this.widthPercent))+"%'>\n        <div class='label'>"+t(this.formattedPace)+"</div>\n      </div>\n    </div>\n  </td>\n</tr>"),a.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(t))}}).call(this),function(){Strava.module("Strava"),window.gCharts=window.gMap=window.gActivity=window.gStreamData=null,Strava.ActivityInitializer=function(){function t(t){this.params=t,window._measurement_preference=this.params.measurement_preference,this.measurementUnits=strava.i18n.measurementUnits(this.params.measurement_preference),"feet"===this.params.measurement_preference&&Strava.I18n.UnitSystem.set(Strava.I18n.UnitSystemSource.IMPERIAL),this.initialize()}return t.prototype.initialize=function(){var t,e,a,i;return e=function(t){return function(){var e,a,i;return jQuery(".chart").addClass("background-off"),i={distance:t.context.context.get("distance"),altitude:t.context.context.get("altitude"),latlng:t.context.context.get("latlng"),time:t.context.context.get("time"),isConverted:!0},e=new Strava.Directory.ElevationDataContext(i,null,t.context.eventDispatcher),a=new Strava.Directory.ElevationChart(e).render(),t.params.on_elevation_chart_click?a.setOnClick(t.params.on_elevation_chart_click):void 0}}(this),t=jQuery("#map_canvas"),this.context=Strava.Activities.StreamContextRegistry.contextFor(this.params.activity_id,this.params.activity_type,!0),a=this.context.request,a.require(["latlng","distance","altitude","time"],{onReady:function(t){return e(t)}}),this.mapContext=Strava.Maps.buildActivityInteractiveMap(this.params.activity_id,this.params.activity_type,!1,t),i=jQuery("table#splits-table"),i.length?jQuery.ajax({url:"/activities/"+this.params.activity_id+"/splits",type:"GET",success:function(t){return function(e){return t.renderSplits(e)}}(this)}):void 0},t.prototype.renderSplits=function(t){var e,a,i,n,r,c;return e=function(t,e,a){var i,n,r;return r=50,n=60,i=e-t>n?t:e-n,((a-i)/(e-i)*(100-r)+r).toFixed(0)},c=JST["activities/splits_table"],a=jQuery(document.createDocumentFragment()),r=new Strava.I18n.ChartLabelPaceFormatter,i=_.max(t,function(t){return t.pace}).pace,n=_.min(t,function(t){return t.pace}).pace,t.forEach(function(t){var s;return s={mile:t.label,pace:t.pace,formattedPace:r.abbreviated(t.pace),widthPercent:e(n,i,t.pace)},a.append(c(s))}),jQuery("table#splits-table").append(a)},t}()}.call(this);